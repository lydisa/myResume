<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<link href="index.css" rel="stylesheet">
	<link href="animate.css" rel="stylesheet">
	<link rel="stylesheet" media="screen and (max-width: 1024px)" href="index-s.css" />
	<title>主页</title>

	<style id="style-1-cropbar-clipper">

		/* Copyright 2014 Evernote Corporation. All rights reserved. */
		
		.en-markup-crop-options {
			top: 18px !important;
			left: 50% !important;
			margin-left: -100px !important;
			width: 200px !important;
			border: 2px rgba(255, 255, 255, .38) solid !important;
			border-radius: 4px !important;
		}
		
		.en-markup-crop-options div div:first-of-type {
			margin-left: 0px !important;
		}
	</style>
</head>

<body>
	<div id="loading_bar">正在载入，请稍候……</div>
	<div id="main" class='hide'>
		<div class="bg" id='bg0'>
			<img id="cloud_7" src="cloud_f.png">
			<img id="cloud_8" src="cloud_f.png">
			<img id="cloud_9" src="cloud_f.png">
		</div>
		<div class="bg" id='bg1'>
			<img id="cloud_4" src="cloud.png">
			<img id="cloud_5" src="cloud.png">
			<img id="cloud_6" src="cloud.png">
		</div>
		<div class="bridge">
			<img class="ani_float" src="cube_red.png" id="land_cube_1">
			<img class='small_cube' src="cube_yellow.png" id="bridge_cube_10">
			<!--<img src="cube.png" id="bridge_cube_9">-->
			<img class='small_cube' src="cube_yellow.png" id="bridge_cube_8">
			<!--<img src="cube_red.png" id="bridge_cube_7">-->
			<img class='small_cube' src="cube.png" id="bridge_cube_6">
			<!--<img src="cube_red.png" id="bridge_cube_5">-->
			<img class='small_cube' src="cube_red.png" id="bridge_cube_4">
			<!--<img src="cube_yellow.png" id="bridge_cube_3">-->
			<img class='small_cube' src="cube.png" id="bridge_cube_2">
			<!--<img src="cube.png" id="bridge_cube_1">-->
			<img src="cube_yellow.png" id="land_cube_2">
			<img class="ani_light" src="light.png" id="role">
		</div>
		<div class="bg" id="bg2">
			<img id="cloud_1" src="cloud.png">
			<img id="cloud_2" src="cloud.png">
			<img id="cloud_3" src="cloud.png">
		</div>
		<div class="block">
			<span></span>
			<span style="bottom: 0"></span>
		</div>
		<div id="show_box" class="none_v">
			<!--关于我-->
			<div id="content_1" class="hide">
				<div class="header">
					<span class='title'>关于我</span>
					<div class="logo">
						<span class='number'>ME</span>
					</div>
				</div>
				<div class="content">
					<strong>黄梅桂</strong><br><br> 热衷于实现各种有趣的视觉效果
					<br> 有数位板绘画和一定的 PS 平面设计功底，对用户体验有一定的见解<br> 有良好的团队合作精神和自学与独立思考能力
					<br>
				</div>
			</div>
			<!--专业技能-->
			<div id="content_2" class="hide">
				<div class="header">
					<span class='title'>专业技能</span>
					<div class="logo">
						<span class='number'>SKILL</span>
					</div>
				</div>
				<div class="content">
					<strong>前端开发工程师</strong><br><br> java 和 Angularjs PC 端网站开发经验，从后端逐渐偏向前端<br> 熟悉 springMVC+maven+dubbo 分布式开发框架<br> 熟练使用
					html、css、javascript、Ajax 和 jquery 实现交互效果
					<br> 熟悉 Angularjs1.x 框架、webpack 构建工具、git<br>
				</div>
			</div>
			<!--项目经验-->
			<div id="content_3" class="hide">
				<div class="header">
					<span class='title'>项目经验</span>
					<div class="logo">
						<span class='number'>EXP</span>
					</div>
				</div>
				<div class="content">
					<strong>在线交易框架</strong><br><br> 与后端人员合作及对接，负责 springmvc 中的 controllerl 层开发和前端页面的业务逻辑开发。<br> 如销售订 单业务，改类业务、订单管理器等。<br>					开发公共组件，如根据数据库配置生成的动态表单。
					<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="http://music.163.com/outchain/player?type=3&id=906903575&auto=1&height=66"></iframe>
					<br>
				</div>
			</div>
			<div class='bt_btn'>关闭</div>
		</div>
	</div>

	<script>
	document.body.scrollTop=0;
		var imgs = document.querySelectorAll(".bridge img");
		var role = document.getElementById("role");
		var showBox = document.getElementById("show_box");
		var block = document.getElementsByClassName("block")[0];
		var allowBoxShow = true;
		var boxOldShow = false;
		var imgMoves = [];
		var docHeight = document.documentElement.clientHeight;
		var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
		var scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;　
		var clientHeight = 0;
				var timer=null;
		if (document.compatMode == "CSS1Compat") {
			clientHeight = document.documentElement.clientHeight;　　
		} else {
			clientHeight = document.body.clientHeight;　　
		}
		window.onload = function () {
			var objLoading = document.getElementById("loading_bar");
			if (objLoading != null) {
				objLoading.classList.add('ani_hide');
				setTimeout(function () {
					objLoading.classList.add("hide");
				}, 1000)
				// objLoading.classList.add('hide');
			}
			var main = document.getElementById("main");
			if (main != null) {
				main.classList.add("ani_show");
				main.classList.remove("hide");
			}
			for (var i = 0; i < imgs.length; i++) {
				var targetTop = imgs[i].offsetTop;
				// var initTop = -imgs[i].offsetHeight - Math.random() * 4000;
				var initTop = -imgs[i].offsetHeight - i * 500;
				imgMoves.push({
					targetTop: targetTop,
					initTop: initTop
				});
				//imgs[i].style.top = initTop + 'px';

			}
			var bg1 = document.getElementById('bg1'),
				bg2 = document.getElementById('bg2')
			bg0 = document.getElementById('bg0')

			addEvent(window, 'scroll', onScroll);
			addEvent(window, 'click', onClick);
			onScroll();
		}

		function onScroll(e) {
			docHeight = document.documentElement.clientHeight;
			scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
			scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;　
			clientHeight = 0;
			if (document.compatMode == "CSS1Compat") {
				clientHeight = document.documentElement.clientHeight;　　
			} else {
				clientHeight = document.body.clientHeight;　　
			}

			rollDown(0, 0.350);
			walk(0.2, 1);
			background(0, 1);
			fade(0.25, 0.35)

		}

		function addEvent(eventTarget, eventType, eventHandler) {
			if (eventTarget.addEventListener) {
				eventTarget.addEventListener(eventType, eventHandler, false);
			} else {
				if (eventTarget.attachEvent) {
					eventType = "on" + eventType;
					eventTarget.attachEvent(eventType, eventHandler);
				} else {
					eventTarget["on" + eventType] = eventHandler;
				}
			}
		}

		function rollDown(beginScrollTopK, endScrollTopK) {
			for (var i = 0; i < imgs.length; i++) {
				var targetTop = imgMoves[i].targetTop;
				var initTop = imgMoves[i].initTop;
				//k为当前滚动条的位置占指定的开始到结束区间的百分比
				var k = getProcession(scrollTop, beginScrollTopK, endScrollTopK);
				imgs[i].style.top = (targetTop - initTop) * k + initTop;
			}
		}

		function walk(beginScrollTopK, endScrollTopK) {
			var k = getProcession(scrollTop, beginScrollTopK, endScrollTopK);
			//当前小球跳向的方块元素索引
			var i = Math.floor(k * imgs.length);
			if (i == 0) {
				showingBox(false, 0);
				return;
			}

			//目前小球跳向目标方块的动画播放进度百分比
			var del = k * imgs.length - i;
			del = del.toFixed(2);
			if (del > 0.8 && del < 0.9 && !imgMoves[i].playing) {
				imgs[i].classList.add("ani_tip");
				imgMoves[i].playing = true;
				setTimeout(function () {
					removeAni(i, "ani_tip");
				}, 2000)
			}
			console.log(del);

			if (del > 0.75) {
				showingBox(true, i);
			} else if (del < 0.65) {
				showingBox(true, i - 1)
			} else {
				showingBox(false)
			}
			//小球上一个目标方块距离当前目标方块的相对坐标计算
			var width = imgs[i].offsetLeft - imgs[i - 1].offsetLeft;
			var height = imgs[i].offsetTop - imgs[i - 1].offsetTop;
			//下一帧动画的相对X轴位移
			var x = width * del;
			//抛物线运动计算公式：y = a*x*x + b*x + c a为指定常数 c为0 要先算出b才能求出目前x轴位移对应的y轴位移
			var a = 0.02;
			var b = (height - a * width * width) / width;
			var y = a * x * x + b * x;
			var oldTop = role.style.top
			role.style.left = imgs[i - 1].offsetLeft - 0.035 * document.documentElement.clientWidth + width * del;
			role.style.top = imgs[i - 1].offsetTop - 0.09 * document.documentElement.clientWidth + y;
		}

		function background(beginScrollTopK, endScrollTopK) {
			bg1.style.marginTop = scrollTop * .7 + 'px';
			bg2.style.marginTop = scrollTop * .2 + 'px';
			bg0.style.marginTop = scrollTop * .8 + 'px';
		}

		function fade(beginScrollTopK, endScrollTopK) {
			var k = getProcession(scrollTop, beginScrollTopK, endScrollTopK);
			block.style.opacity = 1 - k;
			if (k == 1) {
				block.style.display = 'none';
			} else {
				block.style.display = 'block';
			}

		}

		function removeAni(i, aniClass) {
			imgs[i].classList.remove(aniClass);
			imgMoves[i].playing = false;
		}

		function showingBox(show, i) {

			if (i == 0 || i == 7||!allowBoxShow) {
				show = false;
			}
			if (show !== boxOldShow) {
				if (show) {
					var showingContent = document.querySelector('#show_box .showing');
					if (showingContent) {
						showingContent.classList.add("hide");
						showingContent.classList.remove("showing");
					}

					var nextContent = document.querySelector("#content_" + i);
					if (nextContent) {
						// 展示下一个内容
						var logo = nextContent.getElementsByClassName("logo")[0];
						var title = nextContent.getElementsByClassName("title")[0];
						nextContent.classList.add("showing");
						nextContent.classList.remove("hide");
						logo.classList.add("ani_logo");
						title.classList.add("ani_title");
						showBox.classList.add("ani_show_up");
					}
					imgs[i].classList.add("selected");
					showBox.classList.remove("ani_hide_up");
					showBox.classList.remove("none_v");
				} else {
					if (showingContent) {
						// 隐藏
						var logo = showingContent.getElementsByClassName("logo")[0];
						var title = showingContent.getElementsByClassName("title")[0];
						logo.classList.remove("ani_logo");
						title.classList.remove("ani_title");
					}
					var selected = document.getElementsByClassName('selected')[0];
					if (selected) {
						selected.classList.remove('selected')
					}
					showBox.classList.remove("ani_show_up");
					showBox.classList.add("ani_hide_up");
					setTimeout(function () {
						//showBox.classList.add("none_v");
					}, 1000)
				}
				boxOldShow = show;
			}

		}

		function getProcession(scrollTop, beginScrollTopK, endScrollTopK) {
			var k = (scrollTop / (docHeight - clientHeight) - beginScrollTopK) / (endScrollTopK - beginScrollTopK);
			if (k < 0) {
				k = 0
			} else if (k > 1) {
				k = 1
			}
			return k;
		}

		function getScrollTopByProcession(k, beginScrollTopK, endScrollTopK) {
			return (beginScrollTopK + (endScrollTopK - beginScrollTopK) * k) * (docHeight - clientHeight);
		}


		function onClick(event) {
			if(event.target.classList.contains('small_cube'))
			for (var i = 0; i < imgs.length; i++) {
				if (imgs[i] == event.target) {
					var tarScrollTop = getScrollTopByProcession((i+1) / imgs.length, 0.2, 1);
					if(timer){
						clearInterval(timer);
						timer=null;
					}
					allowBoxShow=false;
					timer = setInterval(function () {
						scrollTo(tarScrollTop, 0.07)
					}, 20)
					break;
				}
			}


			function scrollTo(tarScrollTop, speed) {
				if(Math.abs(tarScrollTop-scrollTop)<50){
					allowBoxShow=true;
				}
				if(timer &&Math.abs(tarScrollTop-scrollTop)<=20){
					clearInterval(timer);
					timer=null;
				}
				document.body.scrollTop += (tarScrollTop - scrollTop) * speed
			}
		}

		document.getElementsByClassName("bt_btn")[0].onclick=function(){
			var showingContent = document.querySelector('#show_box .showing');
								if (showingContent) {
						// 隐藏
						var logo = showingContent.getElementsByClassName("logo")[0];
						var title = showingContent.getElementsByClassName("title")[0];
						logo.classList.remove("ani_logo");
						title.classList.remove("ani_title");
					}
					var selected = document.getElementsByClassName('selected')[0];
					if (selected) {
						selected.classList.remove('selected')
					}
					showBox.classList.remove("ani_show_up");
					showBox.classList.add("ani_hide_up");
		}
	</script>


	<div id="NiuniuCaptureEvent" style="display: none;"></div>
</body>

</html>